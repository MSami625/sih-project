
import "./story.css";

import React, { useState, useEffect,useRef } from "react";


function StoryHindi(){
    
  const [secondsLeft, setSecondsLeft] = useState(10); // Set the initial countdown time
  const [scrollToTarget, setScrollToTarget] = useState(false);

  const [text,settext]=useState("");
  const [videoEnded, setVideoEnded] = useState(false);

  useEffect(() => {
    const timerInterval = setInterval(() => {
      if (secondsLeft > 0) {
        setSecondsLeft((prevSeconds) => prevSeconds - 1);
      } else {
        clearInterval(timerInterval);
        setScrollToTarget(true);
      }
    }, 1900);

    return () => clearInterval(timerInterval);
  }, [secondsLeft]);

  useEffect(() => {
    if (scrollToTarget) {
      const targetElement = document.getElementById("scroll");
      if (targetElement) {
        targetElement.scrollIntoView({ behavior: "smooth" });
      }
    }
  }, [scrollToTarget, "scroll"]);

  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [showResults, setShowResults] = useState(false);
  const [score, setScore] = useState(0);
  const videoRef = useRef(null);
  const [name,setName]=useState("");



  const questions = [
    {
      src: "https://ik.imagekit.io/wellnesswards/scene1h.mp4?updatedAt=1695782846749",
      text: "рд╢реНрд░реЗрдпрд╛ рдХреНрдпрд╛ рдХрд░реЗрдЧреА?",
      options: [
        {
          id: 0,
          text: "1. рд╡рд╣ рдмрд┐рд▓реНрд▓реА рдХреА рдорджрдж рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪрддреА рд╣реИ рд▓реЗрдХрд┐рди рд╡рд╣ рд╕рдЬрд╝рд╛ рдирд╣реАрдВ рдкрд╛рдирд╛ рдЪрд╛рд╣рддреАред",
        },
        { id: 1, text: "2. рд╡рд╣ рдЪрд▓реА рдЬрд╛рддреА рд╣реИ." },
        { id: 2, text: "3. рд╡рд╣ рдмрд┐рд▓реНрд▓реА рдХреА рдорджрдж рдХрд░рддреА рд╣реИ рдФрд░ рдЗрд╕ рддрд░рд╣ рд╕реНрдХреВрд▓ рдХреЗ рд▓рд┐рдП рджреЗрд░ рд╣реЛ рдЬрд╛рддреА рд╣реИред" },
        { id: 3, text: "4. рд╡рд╣ рдорджрдж рдХреЗ рд▓рд┐рдП рдХрд┐рд╕реА рдФрд░ рдХреЛ рдмреБрд▓рд╛рддреА рд╣реИ." },
      ],
    },
    {
      src: "https://ik.imagekit.io/wellnesswards/scene2.mp4?updatedAt=1695782492720",
      text: "Q. рд╢реНрд░реЗрдпрд╛ рдХреЛ рдХреНрдпрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП?",
      options: [
        {
          id: 0,
          text: "1. рд╡рд╣ рдмрд╣реБрдд рднреВрдЦреА рд╣реИ рдФрд░ рдЕрдкрдирд╛ рджреЛрдкрд╣рд░ рдХрд╛ рднреЛрдЬрди рд╕рд╛рдЭрд╛ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреАред",
        },
        { id: 1, text: "2. рд╡рд╣ рдЕрдкрдиреЗ рджреЛрд╕реНрддреЛрдВ рд╕реЗ рдЕрдкрдирд╛ рджреЛрдкрд╣рд░ рдХрд╛ рднреЛрдЬрди рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рддреА рд╣реИред" },
        { id: 2, text: "3. рд╡рд╣ рдЕрдкрдирд╛ рджреЛрдкрд╣рд░ рдХрд╛ рднреЛрдЬрди рд╕рд╛рдЭрд╛ рдХрд░рддреА рд╣реИред" },
        { id: 3, text: "4. рд╡рд╣ рдЕрдкрдиреЗ рдмреЗрдВрдЪ-рдореЗрдЯ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдЦрд░реАрджрддреА рд╣реИред" },
      ],
    },
    {
      src: "https://ik.imagekit.io/wellnesswards/scene3.mp4?updatedAt=1695782492794",
      text: "Q. рд╢реНрд░реЗрдпрд╛ рдХреИрд╕реЗ рдЬрд╡рд╛рдм рджреЗрдВрдЧреА?",
      options: [
        { id: 0, text: "1. рд╡рд╣ рдердХреА рд╣реБрдИ рд╣реИ рдФрд░ рдЕрдХреЗрд▓реА рд░рд╣рдирд╛ рдЪрд╛рд╣рддреА рд╣реИред" },
        { id: 1, text: "2. рд╡рд╣ рдЕрдкрдиреЗ рджреЛрд╕реНрддреЛрдВ рдкрд░ рдЙрд╕рдХреЗ рд╕рд╛рде рдЬрдмрд░рджрд╕реНрддреА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЪрд┐рд▓реНрд▓рд╛рддреА рд╣реИред" },
        { id: 2, text: "3. рд╡рд╣ рдЕрдкрдиреЗ рджреЛрд╕реНрддреЛрдВ рдХреЗ рд╕рд╛рде рдЦреЛ-рдЦреЛ рдЦреЗрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╣рдордд рд╣реЛ рдЬрд╛рддреА рд╣реИред" },
        { id: 3, text: "4. рд╡рд╣ рдЕрдкрдиреЗ рджреЛрд╕реНрддреЛрдВ рдХреЛ рдирдЬрд░рдЕрдВрджрд╛рдЬ рдХрд░рддреА рд╣реИ." },
      ],
    },
    {
      src: "https://ik.imagekit.io/wellnesswards/scene4.mp4?updatedAt=1695782492315",
      text: "Q. рд╢реНрд░реЗрдпрд╛ рдХреИрд╕реЗ рдЬрд╡рд╛рдм рджреЗрдВрдЧреА?",
      options: [
        { id: 0, text: "1.рд╡рд╣ рдЕрдкрдиреА рдиреЛрдЯрдмреБрдХ рджреЗрдиреЗ рд╕реЗ рдЗрдВрдХрд╛рд░ рдХрд░ рджреЗрдЧреАред" },
        {
          id: 1,
          text: "2.рд╡рд╣ рдЙрд╕реЗ рдирдЬрд░рдЕрдВрджрд╛рдЬ рдХрд░ рджреЗрдЧреА рдФрд░ рдиреЛрдЯрдмреБрдХ рдХреЛ рдЬрд╛рдВрдЪ рдХреЗ рд▓рд┐рдП рдЬрдорд╛ рдХрд░ рджреЗрдЧреАред",
        },
        {
          id: 2,
          text: "3.рд╡рд╣ рдЙрд╕реЗ рдиреЛрдЯрдмреБрдХ рджреЗрдЧреА рдФрд░ рдЕрдкрдиреА рдиреЛрдЯрдмреБрдХ рдЬрд▓реНрджреА рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреЛ рдХрд╣реЗрдЧреАред",
        },
        {
          id: 3,
          text: "4.рд╡рд╣ рдЙрд╕реЗ рдбрд╛рдВрдЯреЗрдЧреА рдФрд░ рдмрд╛рдж рдореЗрдВ рдиреЛрдЯрдмреБрдХ рдЬрдорд╛ рдХрд░ рджреЗрдЧреАред",
        },
      ],
    },
    {
      src: "https://ik.imagekit.io/wellnesswards/scene5.mp4?updatedAt=1695782492644",
      text: "рдкреНрд░. рд╡рд╣ рдЕрдкрдиреЗ рд╕рд╣рдкрд╛рдард┐рдпреЛрдВ рдХреЛ рдЕрдкрдиреЗ рд╕рд╛рде рдЖрдиреЗ рдХреЗ рд▓рд┐рдП рдХреИрд╕реЗ рдХрд╣реЗрдЧреА?",
      options: [
        { id: 0, text: "1.рд╡рд┐рдирдореНрд░рддрд╛рдкреВрд░реНрд╡рдХ, рд╡рд╣ рдЕрдкрдиреЗ рд╕рднреА рджреЛрд╕реНрддреЛрдВ рд╕реЗ рдкреВрдЫреЗрдЧреАред" },
        { id: 1, text: "2.рд╡рд╣ рдкреНрд░рддреНрдпреЗрдХ рдорд┐рддреНрд░ рдХреЛ рдЯреАрдо рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╛рдзреНрдп рдХрд░реЗрдЧреАред" },
        {
          id: 2,
          text: "3.рд╡рд╣ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЯреАрдо рдмрдирд╛рдиреЗ рдХреЛ рд▓реЗрдХрд░ рдЕрдкрдиреЗ рджреЛрд╕реНрддреЛрдВ рд╕реЗ рд▓рдбрд╝реЗрдЧреАред",
        },
        {
          id: 3,
          text: "4.рд╡рд╣ рдЯреАрдЪрд░ рд╕реЗ рд╢рд┐рдХрд╛рдпрдд рдХрд░реЗрдЧреА рдФрд░ рдорджрдж рдорд╛рдВрдЧреЗрдЧреАред",
        },
      ],
    },
    {
      src: "https://ik.imagekit.io/wellnesswards/scene6.mp4?updatedAt=1695782492522",
      text: "рдкреНрд░. рдХреНрдпрд╛ рд╡рд╣ рдЙрд╕ рдмреАрдорд╛рд░ рдЫрд╛рддреНрд░ рдХреЛ рд╕реАрдЯ рджреЗрдЧреА?",
      options: [
        { id: 0, text: "1. рд╣рд╛рдВ " },
        { id: 1, text: "2. рдирд╣реАрдВ" },
      ],
    },
  ];

  const optionClicked = (id) => {
    // Increment the score
    if (videoEnded) {
    if (id === 0) {
      setScore(score + 1);
    } else if (id === 1) {
      setScore(score + 2);
    } else if (id === 2) {
      setScore(score + 3);
    } else if (id === 3){
      setScore(score + 4);
    }
console.log(score)
    
    if (currentQuestion + 1 < questions.length) {
      setCurrentQuestion(currentQuestion + 1);
      setVideoEnded(false);
    } else {
        
      setShowResults(true);
    }}
  };


  useEffect(() => {
    if (showResults) {
      scores();
    }
  }, [showResults]);



  useEffect(() => {
    const items = JSON.parse(localStorage.getItem('user'));
    if (items) {
     setName(items);
    }
  }, []);


  const scores=()=>{

  if(score>=15){
     settext("рдФрд╕рдд рд╕реНрдХреЛрд░ рд╕реЗ рдКрдкрд░ рд░рд┐рдкреЛрд░реНрдЯ: рдмрдзрд╛рдИ рд╣реЛ! рдЖрдкрдХреЗ рдкрд░рд┐рдгрд╛рдо рджрд░реНрд╢рд╛рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреЗ рдмрдЪреНрдЪреЗ рдХрд╛ рд╕рд╛рдорд╛рдЬрд┐рдХ рд╡реНрдпрд╡рд╣рд╛рд░ рд╕реНрддрд░ рдФрд╕рдд рд╕реЗ рдКрдкрд░ рд╣реИред рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рдЖрдкрдХрд╛ рдмрдЪреНрдЪрд╛ рд▓рдЧрд╛рддрд╛рд░ рджрдпрд╛рд▓реБрддрд╛, рд╕рд╣рд╛рдиреБрднреВрддрд┐ рдФрд░ рджреВрд╕рд░реЛрдВ рдХреА рдорджрдж рдХрд░рдиреЗ рдХреА рдЗрдЪреНрдЫрд╛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред рд╡реЗ рдЕрдкрдиреЗ рдЖрд╕-рдкрд╛рд╕ рдХреЗ рд▓реЛрдЧреЛрдВ рдХреА рдЬрд╝рд░реВрд░рддреЛрдВ рдФрд░ рднрд╛рд╡рдирд╛рдУрдВ рдХреЗ рдкреНрд░рддрд┐ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рдЕрдХреНрд╕рд░ рдРрд╕реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рд╕рдВрд▓рдЧреНрди рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рдЙрдирдХреЗ рд╕рд╛рдорд╛рдЬрд┐рдХ рд╕рдВрдмрдВрдзреЛрдВ рдореЗрдВ рд╕рдХрд╛рд░рд╛рддреНрдордХ рдпреЛрдЧрджрд╛рди рджреЗрддреЗ рд╣реИрдВред рд╕рд╣рд╛рдиреБрднреВрддрд┐ рдФрд░ рджрдпрд╛рд▓реБрддрд╛ рдХреА рдордЬрдмреВрдд рднрд╛рд╡рдирд╛ рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдЗрди рдХреНрд╖реЗрддреНрд░реЛрдВ рдореЗрдВ рдЙрдирдХреЗ рдирд┐рд░рдВрддрд░ рд╡рд┐рдХрд╛рд╕ рдХреЛ рдкреНрд░реЛрддреНрд╕рд╛рд╣рд┐рдд рдХрд░реЗрдВ рдФрд░ рд╕рдорд░реНрдерди рдХрд░реЗрдВред")
  }else if(8>=score<15){
    settext("рдФрд╕рдд рд╕реНрдХреЛрд░ рд░рд┐рдкреЛрд░реНрдЯ: рдЖрдкрдХреЗ рдмрдЪреНрдЪреЗ рдХреЗ рдкрд░рд┐рдгрд╛рдо рдФрд╕рдд рд╕реНрддрд░ рдХреЗ рд╕рд╛рдорд╛рдЬрд┐рдХ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ рд╕рдВрдХреЗрдд рджреЗрддреЗ рд╣реИрдВред рдЗрд╕рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рд╡реЗ рдХреБрдЫ рд╕рд╛рдорд╛рдЬрд┐рдХ рд╡реНрдпрд╡рд╣рд╛рд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рд▓реЗрдХрд┐рди рдХреБрдЫ рдХреНрд╖реЗрддреНрд░реЛрдВ рдореЗрдВ рд╕реБрдзрд╛рд░ рдХреА рдЧреБрдВрдЬрд╛рдЗрд╢ рднреА рд╣реЛ рд╕рдХрддреА рд╣реИред рдЙрдиреНрд╣реЗрдВ рд╕рд╣рд╛рдиреБрднреВрддрд┐, рд╕рд╛рдЭрд╛рдХрд░рдг рдФрд░ рд╕рд╣рдпреЛрдЧ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рдХреЗ рдЕрд╡рд╕рд░ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реБрдП рдЙрдирдХреЗ рд╕рдХрд╛рд░рд╛рддреНрдордХ рд╡реНрдпрд╡рд╣рд╛рд░реЛрдВ рдХрд╛ рдкреЛрд╖рдг рдФрд░ рд╕реБрджреГрдврд╝реАрдХрд░рдг рдЬрд╛рд░реА рд░рдЦрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред рдЦреБрд▓реЗ рд╕рдВрдЪрд╛рд░ рдХреЛ рдкреНрд░реЛрддреНрд╕рд╛рд╣рд┐рдд рдХрд░рдирд╛ рдФрд░ рдЙрдиреНрд╣реЗрдВ рджреВрд╕рд░реЛрдВ рдХреА рдорджрдж рдХрд░рдиреЗ рдХрд╛ рдореВрд▓реНрдп рд╕рд┐рдЦрд╛рдирд╛ рдЙрдирдХреЗ рдЪрд▓ рд░рд╣реЗ рд╕рд╛рдорд╛рдЬрд┐рдХ рдФрд░ рднрд╛рд╡рдирд╛рддреНрдордХ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рд╕рд╣рд╛рдпрддрд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реИред")
  }else if(score<8){
    settext("рдФрд╕рдд рд╕реНрдХреЛрд░ рд╕реЗ рдиреАрдЪреЗ рд░рд┐рдкреЛрд░реНрдЯ: рдЕрд░реЗ! рдЖрдкрдХреЗ рдмрдЪреНрдЪреЗ рдХреЗ рд╕рд╛рдорд╛рдЬрд┐рдХ рд╕реНрддрд░ рдХреЗ рдореВрд▓реНрдпрд╛рдВрдХрди рдХреЗ рд╕рд╛рде, рд╣рдо рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдФрд╕рдд рд╕реЗ рдиреАрдЪреЗ рд╣реИред рдпрд╣ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рдмрдЪреНрдЪреЗ рдореЗрдВ рд╕рд╣рд╛рдиреБрднреВрддрд┐, рджрдпрд╛рд▓реБрддрд╛, рд╕рд╣рдпреЛрдЧ рдХреА рднрд╛рд╡рдирд╛ рдФрд░ рджреВрд╕рд░реЛрдВ рдХреА рднрд╛рд╡рдирд╛рдУрдВ рдХреЛ рд╕рдордЭрдиреЗ рдХрд╛ рд╕реНрддрд░ рддреБрд▓рдирд╛рддреНрдордХ рд░реВрдк рд╕реЗ рдХрдо рд╣реИред рдЗрд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рдХрд╛рд░рдг рд╕рдХрд╛рд░рд╛рддреНрдордХ рд╕рдВрдмрдВрдз рдмрдирд╛рдиреЗ, рдзрдордХрд╛рдиреЗ рдпрд╛ рдЖрдХреНрд░рд╛рдордХ рд╡реНрдпрд╡рд╣рд╛рд░, рдЕрд▓рдЧрд╛рд╡ рдпрд╛ рдЕрдХреЗрд▓рд╛рдкрди, рдЖрддреНрдо-рдХреЗрдВрджреНрд░рд┐рддрддрд╛ рдЖрджрд┐ рдореЗрдВ рдХрдард┐рдирд╛рдИ рд╣реЛ рд╕рдХрддреА рд╣реИред рд▓реЗрдХрд┐рди рдЪрд┐рдВрддрд╛ рдХреА рдХреЛрдИ рдмрд╛рдд рдирд╣реАрдВ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЙрдЪрд┐рдд рдорд╛рд░реНрдЧрджрд░реНрд╢рди рдФрд░ рд╕рдорд░реНрдерди рд╕реЗ рд╣рдо рдЖрдкрдХреЛ рд╕рд╛рдЭрд╛рдХрд░рдг, рд╕рд╣рд╛рдиреБрднреВрддрд┐ рдФрд░ рд╕рд╣рдпреЛрдЧ рдЬреИрд╕реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдХреЗ рд╕рд╛рдорд╛рдЬрд┐рдХ рд╡реНрдпрд╡рд╣рд╛рд░ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рд╕рдХрд╛рд░рд╛рддреНрдордХ рд╕реБрджреГрдвреАрдХрд░рдг, рдореЙрдбрд▓рд┐рдВрдЧ рдФрд░ рджреВрд╕рд░реЛрдВ рдХреЗ рдкреНрд░рддрд┐ рджрдпрд╛рд▓реБрддрд╛ рдФрд░ рд╡рд┐рдЪрд╛рд░рд╢реАрд▓рддрд╛ рдХрд╛ рдЕрднреНрдпрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рдЕрд╡рд╕рд░реЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЗрди рдХреМрд╢рд▓реЛрдВ рдХреЛ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рдмрдЪреНрдЪреЗ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред")
  }
}





useEffect(() => {
    if (videoRef.current) {
      videoRef.current.addEventListener("ended", () => {
        setVideoEnded(true);
      });
    }
    // Clean up the event listener when the component unmounts
    return () => {
      if (videoRef.current) {
        videoRef.current.removeEventListener("ended", () => {
          setVideoEnded(true);
        });
      }
    };
  }, []);

  return (
    <>
      <div className="question-card">
        {/* Current Question  */}

        <div className="story-video">
          <video
          ref={videoRef}
            autoPlay
            width={900}
            controls
            controlsList="nodownload"
            src={questions[currentQuestion].src}
          ></video>
        </div>

        <h3 className="question-text">{questions[currentQuestion].text}</h3>

        {/* List of possible answers  */}
        <ul>
          {questions[currentQuestion].options.map((option) => {
            return (
                <li
                key={option.id}
                onClick={() => optionClicked(option.id)}
                className={videoEnded ? "" : "disabled"} // Disable options if the video has not ended
              >
                {option.text}
              </li>

            );
          })}
          
        </ul>
      </div>
      <div id="scroll"></div>


      {showResults && (
      <div className="overlay"> {/* Apply the overlay class */}
        <div className="final-results">
          {/* Your modal content */}
          <h1>Wohoo {name.name}! рдЖрдкрдиреЗ рдХрд╣рд╛рдиреА рдкреВрд░реА рдХрд░ рд▓реАЁЯШШ</h1>
          <h3>рдЕрднрд┐рднрд╛рд╡рдХ/рдорд╛рддрд╛-рдкрд┐рддрд╛ рдХреЗ рд▓рд┐рдП:</h3>
          <p>{text}</p>
         
          <a href="/">рдореБрдЦрдкреГрд╖реНрда рдкрд░ рд╡рд╛рдкрд╕</a>
      
        </div>
        
      </div>
    )}
     
    </>

    );
}

export default StoryHindi;